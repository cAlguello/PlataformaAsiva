<nav>
  <div class="nav-wrapper  indigo darken-1">
    <a href="#" class="brand-logo">ASIVA PROTOTIPO</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li>
          <a routerLink="/perfil">Perfil</a>
        </li>
        <li>
          <a routerLink="/consultas">Consultas</a>
        </li>
        <li>
          <a routerLink="/buscador">Buscador</a>
        </li>
        <li>
          <a href="" (click)="cerrarSesion()">Salir</a>
        </li>
      </ul>
  </div>
</nav>

<div class="row">

  <div class="row">
    <div class="col m3">
        <p class="center-align">Empresas que mas he consultado</p>
      <div [hidden]="!chart">
        <canvas id="canvas">{{ chart }}</canvas>
      </div>
      <div class="row">
        <table class="highlight centered">
          <thead>
            <tr>
              <th>Cantidad de consultas</th>
              <th>Empresa</th>
              <th>Informacion</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let e of dataVistaMasConsultadas">
              <td>{{e.total}}</td>
              <td>{{e.nombre_empresa}}</td>
              <td>
                <!--<button class="edit_data btn orange modal-trigger" id="{{e.id_empresa}}" data-toggle="modal" data-target="modal1">Contacto</button> -->
                <button class="btn-floating btn-medium waves-effect waves-light red modal-trigger " (click)="setEmpresaModal(e)" data-toggle="modal"
                  data-target="modal1">
                  <i class="material-icons">menu</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>


    </div>

    <div class="col m3">
      <p class="center-align">Empresas con las que mas he concretado contactos</p>
      <div [hidden]="!chart">
          <canvas id="canvas3">{{ chart3 }}</canvas>
        </div>
        <div class="row">
          <table class="highlight centered">
            <thead>
              <tr>
                <th>Cantidad de consultas</th>
                <th>Empresa</th>
                <th>Informacion</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let e of dataVistaHanConcretado">
                <td>{{e.total}}</td>
                <td>{{e.nombre_empresa}}</td>
                <td>
                  <!--<button class="edit_data btn orange modal-trigger" id="{{e.id_empresa}}" data-toggle="modal" data-target="modal1">Contacto</button> -->
                  <button class="btn-floating btn-medium waves-effect waves-light red modal-trigger " (click)="setEmpresaModal(e)" data-toggle="modal"
                    data-target="modal1">
                    <i class="material-icons">menu</i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
    
    <div class="col m3">
      <p class="center-align">Empresas que mas me han consultado</p>
      <div [hidden]="!chart">
          <canvas id="canvas2">{{ chart2 }}</canvas>
        </div>
        <div class="row">
          <table class="highlight centered">
            <thead>
              <tr>
                <th>Cantidad de consultas</th>
                <th>Empresa</th>
                <th>Informacion</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let e of dataVistaMasHanConsultado">
                <td>{{e.total}}</td>
                <td>{{e.nombre_empresa}}</td>
                <td>
                  <!--<button class="edit_data btn orange modal-trigger" id="{{e.id_empresa}}" data-toggle="modal" data-target="modal1">Contacto</button> -->
                  <button class="btn-floating btn-medium waves-effect waves-light red modal-trigger " (click)="setEmpresaModal(e)" data-toggle="modal"
                    data-target="modal1">
                    <i class="material-icons">menu</i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
    <div class="col m3">
        <p class="center-align">Empresas con las que mas he concretado negocios</p>
        <div id="pieChartContent2">
            <canvas id="pieChart2"></canvas>
        </div>
          <div class="row">
            <table class="highlight centered">
              <thead>
                <tr>
                  <th>Cantidad</th>
                  <th>Empresa</th>
                  <!--<th>Fono</th>-->
                  <th>Mail</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let e of dataNegocioConcretadoFinal">
                  <td>{{e.total}}</td>
                  <td>{{e.nombre_empresa}}</td>
                  <!--<td>{{e.fono_empresa}}</td>-->
                  <td>{{e.mail_empresa}}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="row">
              <div class="col s12">
                <!--<div class="row">
                  <button (click)="irBuscador()" class="btn indigo darken-1 waves-effect waves-light" type="submit" name="action">Cambiar Imagen</button>
                </div> -->
                <div class="card-action">
                  <a class="waves-effect waves-light indigo darken-1 btn modal-trigger tooltipped" data-position="bottom" data-delay="50" data-tooltip="Registra negocios realizados en base a las empresas con las que registraste haber contacto "
                    data-toggle="modal" data-target="modal6">Registrar Negocios</a>
               
                  <!-- <a class="waves-effect waves-light indigo darken-1 btn modal-trigger tooltipped" data-position="bottom" data-delay="50" data-tooltip="Revisa los negocios que registraste como concretados"
                    data-toggle="modal" data-target="modal7" (click)="setDetalleNegocioConcretado()">Ver Negocios</a> -->
                </div>
              </div>
        
            </div>
      </div>


  </div>
</div>


<!-- Modal Structure -->
<div id="modal1" class="modal blue-grey darken-1">
  <div class="modal-content white-text">
    <table>
      <thead>
        <tr>
          <th>ID Empresa</th>
          <th>Nombre Empresa</th>
          <th>Direccion Empresa</th>
          <th>Fono Empresa</th>
          <th>Mail Empresa</th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>{{EmpresaModal.id_empresa}}</td>
          <td>{{EmpresaModal.nombre_empresa}}</td>
          <td>{{EmpresaModal.direccion_empresa}}</td>
          <td>{{EmpresaModal.fono_empresa}}</td>
          <td>{{EmpresaModal.mail_empresa}}</td>
        </tr>

      </tbody>
    </table>
  </div>
</div>

<!-- Negocio Modal Structure -->
<div id="modal6" class="modal">
    <div class="modal-content">
  
      <div class="col m4">
        <p class="center-align">Empresas que han concretado contactos</p>
  
        <div class="row">
          <table class="highlight centered">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Empresa</th>
                <th></th>
  
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let e of dataVistaHanConcretado1">
  
                <td>{{e.fecha_consulta}}</td>
                <td>{{e.nombre_empresa}}</td>
                <td>
                  <!--<button class="edit_data btn orange modal-trigger" id="{{e.id_empresa}}" data-toggle="modal" data-target="modal1">Contacto</button> -->
                  <a class="waves-effect waves-light indigo darken-1 btn " (click)="setNegocio(e)">Registrar</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  
  </div>
  
  
  
  
  
  
  <!-- Negocio Concretado Modal Structure -->
  <div id="modal7" class="modal">
    <div class="modal-content">
        <div class="row">
            <p class="center-align">Empresas con las que mas he concretado negocios</p>
            <div id="pieChartContent2">
                <canvas id="pieChart2"></canvas>
            </div>
              <div class="row">
                <table class="highlight centered">
                  <thead>
                    <tr>
                      <th>Cantidad</th>
                      <th>Empresa</th>
                      <th>Fono</th>
                      <th>Mail</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let e of dataNegocioConcretadoFinal">
                      <td>{{e.total}}</td>
                      <td>{{e.nombre_empresa}}</td>
                      <td>{{e.fono_empresa}}</td>
                      <td>{{e.mail_empresa}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </div>
    </div>
  
  </div>